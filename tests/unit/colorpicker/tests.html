<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Color Picker Tests</title>
	<link type="text/css" rel="stylesheet"href="../../../src/css/themes/infragistics/infragistics.theme.css" />

    <link type="text/css" rel="stylesheet" href="../../../src/css/structure/modules/infragistics.ui.colorpicker.css" media="screen" />
	<link type="text/css" href="../../../bower_components/qunit/qunit/qunit.css" rel="stylesheet" media="screen" />
     
	<script type="text/javascript" src="../../../bower_components/jquery/dist/jquery.js"></script>
	<script type="text/javascript" src="../../../bower_components/jquery-tmpl/jquery.tmpl.js"></script>
	<script type="text/javascript" src="../../../bower_components/jquery-ui/jquery-ui.js"></script>
	<script type="text/javascript" src="../../../bower_components/qunit/qunit/qunit.js"></script>
	<script type="text/javascript" src="../../../src/js/modules/infragistics.util.js"></script>
	<script type="text/javascript" src="../../../src/js/modules/infragistics.ui.colorpicker.js"></script>

	<script type="text/javascript">
	    var equalWithEpsilon = function(a,b,epsilon){
	        return Math.abs(a - b) < epsilon;
	    }
		
	    var unitTestsSetup = {
	        colorPickerSelector: "color-picker",
	        actualColorPicker: null,
	        firstColor: null,
            setup: function () {
                $('body').append($("<div></div>").attr("id", this.colorPickerSelector));
                $(this.id(this.colorPickerSelector)).igColorPicker();
                this.actualColorPicker = $(this.id(this.colorPickerSelector)).data("igColorPicker");
                this.firstColor = $($(this.id(this.colorPickerSelector)).find(".igColorPicker-color")[0]);
                this.secondColor = $($(this.id(this.colorPickerSelector)).find(".igColorPicker-color")[1])
	        },
	        teardown: function () {
	            $(this.id(this.colorPickerSelector)).remove();
	        },
	        id: function (selector) {
	            return "#" + selector;
	        }
		};

	    module("igColorPicker unit tests", unitTestsSetup);

	    test("_create", function () {
	        var expectedHtmlMarkup = '<div class="igColorPicker-customColors"><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #ffffff;"></div><div class="igColorPicker-color" style="background-color: #000000;"></div><div class="igColorPicker-color" style="background-color: #EEECE1;"></div><div class="igColorPicker-color" style="background-color: #1F497D;"></div><div class="igColorPicker-color" style="background-color: #4F81BD;"></div><div class="igColorPicker-color" style="background-color: #C0504D;"></div><div class="igColorPicker-color" style="background-color: #9BBB59;"></div><div class="igColorPicker-color" style="background-color: #8064A2;"></div><div class="igColorPicker-color" style="background-color: #4BACC6;"></div><div class="igColorPicker-color" style="background-color: #F79646;"></div></div><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #F2F2F2;"></div><div class="igColorPicker-color" style="background-color: #7F7F7F;"></div><div class="igColorPicker-color" style="background-color: #DDD9C3;"></div><div class="igColorPicker-color" style="background-color: #C6D9F0;"></div><div class="igColorPicker-color" style="background-color: #DBE5F1;"></div><div class="igColorPicker-color" style="background-color: #F2DCDB;"></div><div class="igColorPicker-color" style="background-color: #EBF1DD;"></div><div class="igColorPicker-color" style="background-color: #E5E0EC;"></div><div class="igColorPicker-color" style="background-color: #DBEEF3;"></div><div class="igColorPicker-color" style="background-color: #FDEADA;"></div></div><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #D8D8D8;"></div><div class="igColorPicker-color" style="background-color: #595959;"></div><div class="igColorPicker-color" style="background-color: #C4BD97;"></div><div class="igColorPicker-color" style="background-color: #8DB3E2;"></div><div class="igColorPicker-color" style="background-color: #B8CCE4;"></div><div class="igColorPicker-color" style="background-color: #E5B9B7;"></div><div class="igColorPicker-color" style="background-color: #D7E3BC;"></div><div class="igColorPicker-color" style="background-color: #CCC1D9;"></div><div class="igColorPicker-color" style="background-color: #B7DDE8;"></div><div class="igColorPicker-color" style="background-color: #FAC08F;"></div></div><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #BFBFBF;"></div><div class="igColorPicker-color" style="background-color: #3F3F3F;"></div><div class="igColorPicker-color" style="background-color: #938953;"></div><div class="igColorPicker-color" style="background-color: #548DD4;"></div><div class="igColorPicker-color" style="background-color: #95B3D7;"></div><div class="igColorPicker-color" style="background-color: #D99694;"></div><div class="igColorPicker-color" style="background-color: #C3D69B;"></div><div class="igColorPicker-color" style="background-color: #B2A1C7;"></div><div class="igColorPicker-color" style="background-color: #92CDDC;"></div><div class="igColorPicker-color" style="background-color: #FAC08F;"></div></div><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #A5A5A5;"></div><div class="igColorPicker-color" style="background-color: #262626;"></div><div class="igColorPicker-color" style="background-color: #494429;"></div><div class="igColorPicker-color" style="background-color: #17365D;"></div><div class="igColorPicker-color" style="background-color: #366092;"></div><div class="igColorPicker-color" style="background-color: #953734;"></div><div class="igColorPicker-color" style="background-color: #76923C;"></div><div class="igColorPicker-color" style="background-color: #5F497A;"></div><div class="igColorPicker-color" style="background-color: #31859B;"></div><div class="igColorPicker-color" style="background-color: #E36C09;"></div></div><div class="igColorPicker-row"><div class="igColorPicker-color" style="background-color: #7F7F7F;"></div><div class="igColorPicker-color" style="background-color: #0C0C0C;"></div><div class="igColorPicker-color" style="background-color: #1D1B10;"></div><div class="igColorPicker-color" style="background-color: #0F243E;"></div><div class="igColorPicker-color" style="background-color: #244061;"></div><div class="igColorPicker-color" style="background-color: #632423;"></div><div class="igColorPicker-color" style="background-color: #4F6128;"></div><div class="igColorPicker-color" style="background-color: #3F3151;"></div><div class="igColorPicker-color" style="background-color: #205867;"></div><div class="igColorPicker-color" style="background-color: #974806;"></div></div></div><div class="ui-colorpicker-standardcolors"><div class="igColorPicker-color" style="background-color: #C00000;"></div><div class="igColorPicker-color" style="background-color: #FF0000;"></div><div class="igColorPicker-color" style="background-color: #FFC000;"></div><div class="igColorPicker-color" style="background-color: #FFFF00;"></div><div class="igColorPicker-color" style="background-color: #92D050;"></div><div class="igColorPicker-color" style="background-color: #00B050;"></div><div class="igColorPicker-color" style="background-color: #00B0F0;"></div><div class="igColorPicker-color" style="background-color: #0070C0;"></div><div class="igColorPicker-color" style="background-color: #002060;"></div><div class="igColorPicker-color" style="background-color: #7030A0;"></div></div>';

	        deepEqual($(this.actualColorPicker._colorTable).html(), expectedHtmlMarkup, "_create does not append right markup");
	    });

	    test("_changeSelectedColor", function () {
	        this.actualColorPicker._changeSelectedColor(this.firstColor);
	        ok(this.firstColor.hasClass("selected-color"), "first color wasn't selected");
	    });

	    test("_changeColorOptions", function() {
	    	this.actualColorPicker._setOption("colors", []);
	    	equal(this.actualColorPicker.options.colors.length , 0, "colors options is set to empty through _setOption method");
	    })
	    
	    test("_changeStandardColorsOption", function () {
	    	var colors = ["#f0ff0f", "#000a00", "#FEECE1"];
	    	
	    	notEqual(this.actualColorPicker.options.standardColors, colors, "arry of given colors isn't equal to  standardColors option");
	    	
	    	this.actualColorPicker._setOption("standardColors", colors)
	    	equal(this.actualColorPicker.options.standardColors, colors, "array of standardColors option was changed through _setOption method");
	    })
	    
	    test("selectColor", function () {
	    	var colorFromPicker = this.actualColorPicker.selectColor("#000000")
	    	ok(this.secondColor.hasClass("selected-color"), "Select given color");
	    })
	    
	    test("_getColorByElement", function () {
	    	var expectedResult = this.secondColor.css("background-color");
	    	var getColor = this.actualColorPicker._getColor(this.secondColor);
	    	equal(getColor, expectedResult, "Get given color by element through _getColor method");   	
	    })
	    
	    test("_clickCurrentColor", function () {
	    	var clickFirstCustomColor = this.actualColorPicker.element.find(".igColorPicker-table").find(".igColorPicker-customColors").find(".igColorPicker-row").first().find(".igColorPicker-color").first().trigger("click");
	    	ok(clickFirstCustomColor.hasClass("selected-color"), "Trigger colorpicker click event");
	    })
	    
	    test("_setTheSameOptionValue", function () {
	    	var color = "#C00000";
	    	
	    	notEqual(color, this.actualColorPicker.options.standardColors, "color value isn't equal with standardColor value"); 
	    	
	    	this.actualColorPicker._setOption("standardColors", color)
	    	equal(this.actualColorPicker.options.standardColors, color, "set color value to standardColors through _setOption method");
	    	
	    	this.actualColorPicker._setOption("standardColors", color)
	    	equal(color, this.actualColorPicker.options.standardColors, "set the same color value to standardColors option");
	    })

	</script>
</head>
<body>
	<!--<div id="qunit"></div>
    <div id="qunit-fixture"></div>
	-->
	
	<div style="float:right;width:400px;overflow:auto;">
		<h1 id="qunit-header">Test results</h1>
		<h2 id="qunit-banner"></h2>
		<h2 id="qunit-userAgent"></h2>
		<ol id="qunit-tests"></ol>
	</div>
</body>
</html>